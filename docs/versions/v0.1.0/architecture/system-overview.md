---
version: "1.0.0"
last_updated: "2024-01-15"
author: "架构师"
reviewers: ["技术负责人", "产品经理"]
status: "approved"
changelog:
  - version: "1.0.0"
    date: "2024-01-15"
    changes: ["初始架构设计", "定义分层架构", "确定技术栈"]
---

# 系统总体架构概述

## 1. 系统简介

SiCal是一个智能学习平台，专注于医学与药学的可视化学习。系统采用现代化的Web技术栈，提供响应式的用户体验，支持多设备访问。

## 2. 架构概览

### 2.1 整体架构图

```
┌─────────────────────────────────────────────────────────────┐
│                        用户层                                │
├─────────────────────────────────────────────────────────────┤
│  Web浏览器  │  移动浏览器  │  平板浏览器  │  桌面应用(未来)    │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                      前端层 (React)                         │
├─────────────────────────────────────────────────────────────┤
│  用户界面  │  状态管理  │  路由管理  │  API客户端  │  样式系统  │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼ HTTPS/REST API
┌─────────────────────────────────────────────────────────────┐
│                    API网关/负载均衡                          │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                    后端服务层 (Node.js)                     │
├─────────────────────────────────────────────────────────────┤
│  认证服务  │  用户服务  │  知识库服务  │  学习路径服务  │  评估服务 │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                      数据层                                 │
├─────────────────────────────────────────────────────────────┤
│    MongoDB     │    Redis缓存    │    文件存储    │    日志    │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 架构分层

#### 用户层
- **Web浏览器**: 支持现代浏览器（Chrome、Firefox、Safari、Edge）
- **移动设备**: 响应式设计，支持iOS和Android设备
- **平板设备**: 优化的平板体验
- **桌面应用**: 未来可能的Electron应用

#### 前端层
- **框架**: React 18 + TypeScript
- **UI组件**: Ant Design
- **状态管理**: React Context + Hooks
- **路由**: React Router
- **构建工具**: Vite
- **样式**: CSS Modules + 响应式设计

#### 后端层
- **运行时**: Node.js
- **框架**: Express.js
- **语言**: TypeScript
- **认证**: JWT + bcrypt
- **API**: RESTful API
- **中间件**: 认证、错误处理、日志记录

#### 数据层
- **主数据库**: MongoDB
- **缓存**: Redis（未来）
- **文件存储**: 本地文件系统（未来可扩展到云存储）
- **日志**: 文件日志 + 控制台输出

## 3. 核心特性

### 3.1 响应式设计
- 移动端优先的设计理念
- 支持多种屏幕尺寸和设备类型
- 触摸友好的交互设计
- 自适应布局和组件

### 3.2 模块化架构
- 前后端分离
- 组件化开发
- 服务化拆分
- 可插拔的功能模块

### 3.3 安全性
- JWT身份认证
- 密码加密存储
- API访问控制
- 输入验证和过滤
- HTTPS传输加密

### 3.4 性能优化
- 代码分割和懒加载
- 图片优化和压缩
- API响应缓存
- 数据库查询优化
- CDN内容分发（未来）

## 4. 技术选型理由

### 4.1 前端技术选型

**React + TypeScript**
- 组件化开发，代码复用性高
- 强类型支持，减少运行时错误
- 丰富的生态系统和社区支持
- 良好的开发工具和调试体验

**Ant Design**
- 企业级UI组件库
- 设计规范统一
- 组件功能完善
- 良好的TypeScript支持

**Vite**
- 快速的开发服务器
- 高效的构建性能
- 现代化的模块处理
- 良好的TypeScript支持

### 4.2 后端技术选型

**Node.js + Express**
- JavaScript全栈开发
- 高性能的异步I/O
- 丰富的npm生态
- 快速开发和部署

**MongoDB**
- 文档型数据库，适合复杂数据结构
- 良好的扩展性
- 丰富的查询功能
- 与Node.js集成良好

**TypeScript**
- 静态类型检查
- 更好的代码提示和重构
- 减少运行时错误
- 提高代码质量

## 5. 部署架构

### 5.1 开发环境
```
开发机器
├── 前端开发服务器 (Vite) - 端口5173
├── 后端开发服务器 (Node.js) - 端口5001
└── MongoDB数据库 - 端口27017
```

### 5.2 生产环境（未来）
```
负载均衡器 (Nginx)
├── 前端静态文件服务
├── API代理转发
└── SSL终止

应用服务器
├── Node.js应用实例 (PM2管理)
├── MongoDB集群
└── Redis缓存集群
```

## 6. 扩展性考虑

### 6.1 水平扩展
- 无状态的API设计
- 数据库分片支持
- 负载均衡配置
- 微服务架构演进

### 6.2 垂直扩展
- 服务器资源升级
- 数据库性能优化
- 缓存策略优化
- CDN内容分发

## 7. 监控和运维

### 7.1 日志管理
- 应用日志记录
- 错误日志追踪
- 访问日志分析
- 性能指标监控

### 7.2 健康检查
- API健康状态检查
- 数据库连接监控
- 系统资源监控
- 自动故障恢复

## 8. 安全架构

### 8.1 认证授权
- JWT令牌机制
- 角色权限控制
- API访问限制
- 会话管理

### 8.2 数据安全
- 密码加密存储
- 敏感数据脱敏
- 数据传输加密
- 数据备份策略

## 9. 未来规划

### 9.1 短期目标（3-6个月）
- 完善核心功能
- 性能优化
- 用户体验改进
- 移动端适配完善

### 9.2 中期目标（6-12个月）
- 微服务架构重构
- 缓存系统引入
- 搜索引擎集成
- 数据分析平台

### 9.3 长期目标（1-2年）
- 云原生架构
- 人工智能集成
- 多租户支持
- 国际化支持